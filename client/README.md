# 체스 클라이언트 기능명세

- 여러 화면과 다이얼로그가 존재. 추후 확장성을 고려해야함.
- 모든 화면은 가장자리에 테두리가 존재함.
- 서버와의 연동을 고려하여 확장성 고려해서 제작 (서버와의 통신은 common/PROTOCOL.md 참조)
- 유니코드 문자를 사용한다는 점을 고려
- 프로덕션 레벨에 준하는 수준으로 제작 (단, 너무 많은 기능을 구현하지는 말것 (점진적으로 개발 예정이므로))

## 구현된 기능

### 🎮 메인 화면
- 게임 시작, 옵션, 종료 메뉴가 존재하고 게임 시작 메뉴에서 다이얼로그로 유저이름을 입력받음
- 키보드 (1, 2, 3) 또는 마우스로 메뉴 선택 가능
- SIGINT(Ctrl+C) 신호 무시로 의도치 않은 종료 방지

### 🔍 매칭 화면
- 매칭이 시작되면 매칭 대기 중 메시지가 표시되고 업타임을 보여줌
- 취소 버튼(ESC)을 누르면 취소됨
- 매칭이 완료되면 게임 화면으로 이동 (현재는 5초 후 자동 이동)

### ♟️ 게임 화면
- 체스 보드가 왼쪽에 표시되고, 오른쪽에 채팅과 게임 메뉴가 표시됨
- 체스 보드 크기는 고정되어 있고, 채팅과 게임 메뉴는 화면 크기에 맞게 유동적으로 변함
- 실시간 채팅 시스템 구현
- 마우스 클릭으로 체스 기물 선택 및 이동
- 선택된 기물은 하이라이트로 표시

#### 📢 채팅 시스템
- 채팅 메시지가 표시되고, 시스템 메시지 지원
- 최대 50개 메시지 저장, 12개까지 화면에 표시
- 오래된 메시지는 자동으로 제거

#### 🎯 게임 메뉴
- 기권, 무승부 제안, 게임 저장, 메인으로 돌아가기 기능
- 현재 턴 표시
- 키보드 단축키 지원 (1-4번)

### 🎨 UI/UX 특징
- 유니코드 체스 기물 사용 (♔♕♖♗♘♙♚♛♜♝♞♟)
- 체스판 흑백 칸 색상 구분
- 선택된 기물과 칸 하이라이트
- 테두리가 있는 윈도우 기반 UI
- 반응형 레이아웃

## 빌드 및 실행

### 요구사항
- Linux 환경
- 최소 터미널 크기: 90x25
- ncurses 라이브러리 (ncursesw)
- pthread 라이브러리

### 빌드 방법
```bash
# 루트 디렉터리에서
./build.sh client

# 또는 클라이언트만 빌드
cd build
make client
```

### 실행 방법
```bash
# 빌드 완료 후
./build/client/client

# 또는 build 디렉터리에서
cd build/client
./client
```

## 사용법

### 메인 화면
1. `1` 키 또는 마우스 클릭으로 게임 시작
2. 사용자명 입력 다이얼로그에서 닉네임 입력
3. `3` 키 또는 `q`로 프로그램 종료

### 매칭 화면
- 자동으로 상대방을 찾습니다 (현재는 5초 후 시연용 게임 시작)
- `ESC` 키로 매칭 취소 가능

### 게임 화면
- **기물 선택**: 체스판의 기물을 마우스로 클릭
- **기물 이동**: 선택된 기물을 다른 위치로 클릭하여 이동
- **선택 해제**: 같은 기물을 다시 클릭
- **게임 메뉴**: 
  - `1`: 기권
  - `2`: 무승부 제안
  - `3`: 게임 저장 (미구현)
  - `4` 또는 `ESC`: 메인 화면으로 돌아가기
- **채팅**: `Enter` 키로 간단한 인사말 전송

## 향후 구현 예정 기능
- [ ] 실제 서버 연동
- [ ] 완전한 체스 규칙 구현 (캐슬링, 앙파상, 프로모션 등)
- [ ] 실시간 채팅 입력
- [ ] PGN 형식 게임 저장/불러오기
- [ ] 타이머 기능
- [ ] 게임 리플레이
- [ ] 옵션 설정 화면

## 파일 구조
```
client/
├── main.c              # 메인 프로그램 파일
├── game_state.h        # 게임 상태 관리 헤더
├── game_state.c        # 게임 상태 관리 구현
├── CMakeLists.txt      # 빌드 설정
└── README.md           # 이 파일
```
